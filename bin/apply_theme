#!/bin/bash
# April 2017
# Written by : unix121
# GitHub : https://github.com/unix121
# Website : unix121.github.io
# E-mail : unix121@protonmail.com
# Simple script to apply a theme from my collection

# rynn started to modify on 2017-04-24

THEME=$1
THEME_DIR=~/Themes

exec 2> /dev/null

echo '[*] Applying the theme..'

# First we try to locate the theme
if [ -d "$THEME_DIR/$THEME" ]
then
  echo '  [+] Located the theme directory...'

  # Now that the file is located we copy everything into the right place

  if cp $THEME_DIR/$THEME/i3-config ~/.config/i3/config
  then
    echo '  [+] .i3/config configuration file set up successfully'
  else
    echo '  [-] Failed to apply .i3/config configuration file'
  fi

  if cp $THEME_DIR/$THEME/compton.conf ~/.config/compton.conf
  then
    echo '  [+] .config/compton.conf configuration file set up successfully'
  else
    echo '  [-] Failed to apply .config/compton.conf configuration file'
  fi

  if cp $THEME_DIR/$THEME/Xresources ~/.Xresources
  then
    echo '  [+] .Xresources file set up successfully'
  else
    echo '  [-] Failed to apply .Xresources configuration file'
  fi

  if cp $THEME_DIR/$THEME/extend.Xresources ~/.extend.Xresources
  then
    echo '  [+] .extend.Xresources file set up successfully'
  else
    echo '  [-] Failed to apply .extend.Xresources configuration file'
  fi

  if xrdb ~/.Xresources
  then
    echo '  [+] Terminal Theme applied successfully'
  else
    echo '  [-] Failed to apply terminal theme'
  fi

  if [ "$THEME_DIR/$THEME/bashrc" ]
  then
    if cp $THEME_DIR/$THEME/bashrc ~/.bashrc
    then
      echo '  [+] bashrc set up successfully'
    else
      echo '  [-] Failed to apply bashrc'
    fi
  else
    echo '  [-] This theme does not have a bashrc included'
  fi

  if cp $THEME_DIR/$THEME/polybar-config ~/.config/polybar/config
  then
    echo '  [+] .config/polybar/config configuration file set up successfully'
  else
    echo '  [-] Failed to apply ./config/polybar/config configuration file'
  fi


  # if cp ../scripts/polybar/launch.sh ~/.config/polybar/launch.sh
  # then
  #   chmod u+x ~/.config/polybar/launch.sh
  #   echo '  [+] .config/polybar/launch.sh script set up successfully'
  # else
  #   echo '  [-] Failed to apply .config/polybar/launch.sh script'
  # fi
  #

  if cp $THEME_DIR/$THEME/xsettingsd ~/.xsettingsd
  then
    echo '  [+] xsettingsd file set up successfully'
  else
    echo '  [-] Failed to apply xsettingsd file'
  fi

  if xsettingsd &
  then
    echo '  [+] Icons and GTK Themes applied successfully'
  else
    echo '  [-] Failed to apply GTK theme'
  fi

  if feh --bg-fill $THEME_DIR/$THEME/$THEME.jpg
  then
    echo '  [+] Wallpaper set successfully'
  else
    echo '  [-] Could not set wallpaper (feh missing?)'
  fi

  if [ -d "$THEME_DIR/$THEME/startpage" ]
  then
    if cp $THEME_DIR/$THEME/startpage/startpage.html ~/bin/startpage.html
    then
      echo '  [+] startpage set up successfully'
    else
      echo '  [-] Failed to apply startpage.html'
    fi
    if cp $THEME_DIR/$THEME/startpage/start.css ~/bin/start.css
    then
      echo '  [+] start.css set up successfully'
    else
      echo '  [-] Failed to apply startpage.css'
    fi

  else
    echo '  [-] This theme does not have a startpage included'
  fi


  # Finally we restart i3wm
  i3-msg restart


else

  echo '[-] ERROR: Could not locate the theme directory...'
fi

echo '[*] Script exiting...'

exit
